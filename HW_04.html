<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Elijah Willie" />


<title>STAT 545 HW 04</title>

<script src="HW_04_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="HW_04_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="HW_04_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="HW_04_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="HW_04_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="HW_04_files/navigation-1.1/tabsets.js"></script>
<link href="HW_04_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="HW_04_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->





<div class="fluid-row" id="header">



<h1 class="title toc-ignore">STAT 545 HW 04</h1>
<h4 class="author"><em>Elijah Willie</em></h4>
<h4 class="date"><em>October 8, 2018</em></h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
</div>
<div id="data-reshaping-prompts-and-relationship-to-aggregation" class="section level1">
<h1>Data Reshaping Prompts (and relationship to aggregation)</h1>
<div id="activity---make-your-own-cheatsheet" class="section level2">
<h2>Activity - Make your own cheatsheet</h2>
<p>I will be making a cheatsheet about tidying, splitting and applying functions to data. For this I will be using two separate datasets. First I will demonstrate tidying using the billboards top 100 dataset, and second I will demonstrate splitting and applying using a dataset from my previous university</p>
<div id="load-the-required-libraries-and-data" class="section level3">
<h3>Load the required libraries and data</h3>
<pre class="r"><code>library(tidyverse) # loads dplyr, ggplot2, tidyr, etc</code></pre>
<pre><code>## ── Attaching packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
## ✔ readr   1.1.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(dplyr)
setwd(&quot;/home/elijah/Documents/UBC_Courses/STAT_545/hw04-ecool50&quot;)</code></pre>
</div>
<div id="load-in-the-required-datasets" class="section level3">
<h3>load in the required datasets</h3>
<pre class="r"><code>#load in the billboard dataset
bb &lt;- read.csv(&quot;billboard.csv&quot;,stringsAsFactors = FALSE)

#load in the sfu statistics dataset
load(&quot;scilong.RData&quot;)</code></pre>
</div>
<div id="get-a-feel-for-the-datasets" class="section level3">
<h3>Get a feel for the datasets</h3>
<pre class="r"><code>knitr::kable(head(bb))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist.inverted</th>
<th align="left">track</th>
<th align="left">time</th>
<th align="left">genre</th>
<th align="left">date.entered</th>
<th align="left">date.peaked</th>
<th align="right">x1st.week</th>
<th align="right">x2nd.week</th>
<th align="right">x3rd.week</th>
<th align="right">x4th.week</th>
<th align="right">x5th.week</th>
<th align="right">x6th.week</th>
<th align="right">x7th.week</th>
<th align="right">x8th.week</th>
<th align="right">x9th.week</th>
<th align="right">x10th.week</th>
<th align="right">x11th.week</th>
<th align="right">x12th.week</th>
<th align="right">x13th.week</th>
<th align="right">x14th.week</th>
<th align="right">x15th.week</th>
<th align="right">x16th.week</th>
<th align="right">x17th.week</th>
<th align="right">x18th.week</th>
<th align="right">x19th.week</th>
<th align="right">x20th.week</th>
<th align="right">x21st.week</th>
<th align="right">x22nd.week</th>
<th align="right">x23rd.week</th>
<th align="right">x24th.week</th>
<th align="right">x25th.week</th>
<th align="right">x26th.week</th>
<th align="right">x27th.week</th>
<th align="right">x28th.week</th>
<th align="right">x29th.week</th>
<th align="right">x30th.week</th>
<th align="right">x31st.week</th>
<th align="right">x32nd.week</th>
<th align="right">x33rd.week</th>
<th align="right">x34th.week</th>
<th align="right">x35th.week</th>
<th align="right">x36th.week</th>
<th align="right">x37th.week</th>
<th align="right">x38th.week</th>
<th align="right">x39th.week</th>
<th align="right">x40th.week</th>
<th align="right">x41st.week</th>
<th align="right">x42nd.week</th>
<th align="right">x43rd.week</th>
<th align="right">x44th.week</th>
<th align="right">x45th.week</th>
<th align="right">x46th.week</th>
<th align="right">x47th.week</th>
<th align="right">x48th.week</th>
<th align="right">x49th.week</th>
<th align="right">x50th.week</th>
<th align="right">x51st.week</th>
<th align="right">x52nd.week</th>
<th align="right">x53rd.week</th>
<th align="right">x54th.week</th>
<th align="right">x55th.week</th>
<th align="right">x56th.week</th>
<th align="right">x57th.week</th>
<th align="right">x58th.week</th>
<th align="right">x59th.week</th>
<th align="right">x60th.week</th>
<th align="right">x61st.week</th>
<th align="right">x62nd.week</th>
<th align="right">x63rd.week</th>
<th align="right">x64th.week</th>
<th align="right">x65th.week</th>
<th align="left">x66th.week</th>
<th align="left">x67th.week</th>
<th align="left">x68th.week</th>
<th align="left">x69th.week</th>
<th align="left">x70th.week</th>
<th align="left">x71st.week</th>
<th align="left">x72nd.week</th>
<th align="left">x73rd.week</th>
<th align="left">x74th.week</th>
<th align="left">x75th.week</th>
<th align="left">x76th.week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Destiny’s Child</td>
<td align="left">Independent Women Part I</td>
<td align="left">3:38</td>
<td align="left">Rock</td>
<td align="left">2000-09-23</td>
<td align="left">2000-11-18</td>
<td align="right">78</td>
<td align="right">63</td>
<td align="right">49</td>
<td align="right">33</td>
<td align="right">23</td>
<td align="right">15</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">10</td>
<td align="right">12</td>
<td align="right">15</td>
<td align="right">22</td>
<td align="right">29</td>
<td align="right">31</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Santana</td>
<td align="left">Maria, Maria</td>
<td align="left">4:18</td>
<td align="left">Rock</td>
<td align="left">2000-02-12</td>
<td align="left">2000-04-08</td>
<td align="right">15</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">15</td>
<td align="right">19</td>
<td align="right">21</td>
<td align="right">26</td>
<td align="right">36</td>
<td align="right">48</td>
<td align="right">47</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Savage Garden</td>
<td align="left">I Knew I Loved You</td>
<td align="left">4:07</td>
<td align="left">Rock</td>
<td align="left">1999-10-23</td>
<td align="left">2000-01-29</td>
<td align="right">71</td>
<td align="right">48</td>
<td align="right">43</td>
<td align="right">31</td>
<td align="right">20</td>
<td align="right">13</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">14</td>
<td align="right">17</td>
<td align="right">21</td>
<td align="right">24</td>
<td align="right">30</td>
<td align="right">34</td>
<td align="right">37</td>
<td align="right">46</td>
<td align="right">47</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Madonna</td>
<td align="left">Music</td>
<td align="left">3:45</td>
<td align="left">Rock</td>
<td align="left">2000-08-12</td>
<td align="left">2000-09-16</td>
<td align="right">41</td>
<td align="right">23</td>
<td align="right">18</td>
<td align="right">14</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">11</td>
<td align="right">16</td>
<td align="right">20</td>
<td align="right">25</td>
<td align="right">27</td>
<td align="right">27</td>
<td align="right">29</td>
<td align="right">44</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Aguilera, Christina</td>
<td align="left">Come On Over Baby (All I Want Is You)</td>
<td align="left">3:38</td>
<td align="left">Rock</td>
<td align="left">2000-08-05</td>
<td align="left">2000-10-14</td>
<td align="right">57</td>
<td align="right">47</td>
<td align="right">45</td>
<td align="right">29</td>
<td align="right">23</td>
<td align="right">18</td>
<td align="right">11</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">22</td>
<td align="right">23</td>
<td align="right">43</td>
<td align="right">44</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Janet</td>
<td align="left">Doesn’t Really Matter</td>
<td align="left">4:17</td>
<td align="left">Rock</td>
<td align="left">2000-06-17</td>
<td align="left">2000-08-26</td>
<td align="right">59</td>
<td align="right">52</td>
<td align="right">43</td>
<td align="right">30</td>
<td align="right">29</td>
<td align="right">22</td>
<td align="right">15</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">8</td>
<td align="right">20</td>
<td align="right">25</td>
<td align="right">37</td>
<td align="right">40</td>
<td align="right">41</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<pre class="r"><code>knitr::kable(head(scilong))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Subject</th>
<th align="left">CrsNum</th>
<th align="right">CreditHrs</th>
<th align="right">semester</th>
<th align="right">enrollment</th>
<th align="right">FTEs</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ACMA</td>
<td align="left">210</td>
<td align="right">3</td>
<td align="right">1077</td>
<td align="right">51</td>
<td align="right">5.10000</td>
<td align="right">2008</td>
</tr>
<tr class="even">
<td align="left">ACMA</td>
<td align="left">335</td>
<td align="right">3</td>
<td align="right">1077</td>
<td align="right">20</td>
<td align="right">2.00000</td>
<td align="right">2008</td>
</tr>
<tr class="odd">
<td align="left">ACMA</td>
<td align="left">425</td>
<td align="right">3</td>
<td align="right">1077</td>
<td align="right">22</td>
<td align="right">2.20000</td>
<td align="right">2008</td>
</tr>
<tr class="even">
<td align="left">ACMA</td>
<td align="left">465</td>
<td align="right">3</td>
<td align="right">1077</td>
<td align="right">16</td>
<td align="right">1.60000</td>
<td align="right">2008</td>
</tr>
<tr class="odd">
<td align="left">ACMA</td>
<td align="left">490</td>
<td align="right">3</td>
<td align="right">1077</td>
<td align="right">4</td>
<td align="right">0.40000</td>
<td align="right">2008</td>
</tr>
<tr class="even">
<td align="left">BISC</td>
<td align="left">100</td>
<td align="right">4</td>
<td align="right">1077</td>
<td align="right">176</td>
<td align="right">23.46667</td>
<td align="right">2008</td>
</tr>
</tbody>
</table>
<div id="structure-of-the-billboard-datasettaken-from-online" class="section level4">
<h4>Structure of the billboard dataset(taken from online)</h4>
<ul>
<li>Columns <code>year</code> through <code>date.peaked</code> describe the song, then <code>x1st.week</code> through <code>x76th.week</code> are the chart positions for the first through 76th weeks.
<ul>
<li>If a song is on the chart for less than 76 weeks, its position is <code>NA</code> for any missing weeks.</li>
</ul></li>
<li>Weeks are not variables, they are the time data for the time series.</li>
</ul>
</div>
<div id="looking-at-the-billboard-dataset-it-seems-pretty-messy.-so-lets-tidy-it-up-a-bit." class="section level4">
<h4>Looking at the billboard dataset, it seems pretty messy. So lets tidy it up a bit.</h4>
<ul>
<li>Main idea is gather the rankings in the different weeks into a <code>rank</code> variable.</li>
<li>Before gathering, may need to select/rename some of the variables.</li>
<li>After gathering, will create some new variables and sort the data frame.</li>
</ul>
</div>
<div id="i-will-select-and-rename-some-of-the-variables" class="section level4">
<h4>I will select and rename some of the variables</h4>
<ul>
<li>I don’t think I will need <code>time</code> or <code>genre</code>, as it does not seem relevant for my cause.
<ul>
<li>Use the <code>select()</code> function from <code>dplyr</code>. You can us <code>-</code> to de-select a column</li>
</ul></li>
<li>Rename <code>artist.inverted</code> as it does not seem too appropriate.
<ul>
<li><code>rename()</code> from <code>dplyr</code> takes arguments of the form <code>newname = oldname</code></li>
</ul></li>
</ul>
<pre class="r"><code>bb &lt;- 
  bb %&gt;% select(-time,-genre) %&gt;% 
  rename(artist = artist.inverted) 

knitr::kable(head(bb))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">date.entered</th>
<th align="left">date.peaked</th>
<th align="right">x1st.week</th>
<th align="right">x2nd.week</th>
<th align="right">x3rd.week</th>
<th align="right">x4th.week</th>
<th align="right">x5th.week</th>
<th align="right">x6th.week</th>
<th align="right">x7th.week</th>
<th align="right">x8th.week</th>
<th align="right">x9th.week</th>
<th align="right">x10th.week</th>
<th align="right">x11th.week</th>
<th align="right">x12th.week</th>
<th align="right">x13th.week</th>
<th align="right">x14th.week</th>
<th align="right">x15th.week</th>
<th align="right">x16th.week</th>
<th align="right">x17th.week</th>
<th align="right">x18th.week</th>
<th align="right">x19th.week</th>
<th align="right">x20th.week</th>
<th align="right">x21st.week</th>
<th align="right">x22nd.week</th>
<th align="right">x23rd.week</th>
<th align="right">x24th.week</th>
<th align="right">x25th.week</th>
<th align="right">x26th.week</th>
<th align="right">x27th.week</th>
<th align="right">x28th.week</th>
<th align="right">x29th.week</th>
<th align="right">x30th.week</th>
<th align="right">x31st.week</th>
<th align="right">x32nd.week</th>
<th align="right">x33rd.week</th>
<th align="right">x34th.week</th>
<th align="right">x35th.week</th>
<th align="right">x36th.week</th>
<th align="right">x37th.week</th>
<th align="right">x38th.week</th>
<th align="right">x39th.week</th>
<th align="right">x40th.week</th>
<th align="right">x41st.week</th>
<th align="right">x42nd.week</th>
<th align="right">x43rd.week</th>
<th align="right">x44th.week</th>
<th align="right">x45th.week</th>
<th align="right">x46th.week</th>
<th align="right">x47th.week</th>
<th align="right">x48th.week</th>
<th align="right">x49th.week</th>
<th align="right">x50th.week</th>
<th align="right">x51st.week</th>
<th align="right">x52nd.week</th>
<th align="right">x53rd.week</th>
<th align="right">x54th.week</th>
<th align="right">x55th.week</th>
<th align="right">x56th.week</th>
<th align="right">x57th.week</th>
<th align="right">x58th.week</th>
<th align="right">x59th.week</th>
<th align="right">x60th.week</th>
<th align="right">x61st.week</th>
<th align="right">x62nd.week</th>
<th align="right">x63rd.week</th>
<th align="right">x64th.week</th>
<th align="right">x65th.week</th>
<th align="left">x66th.week</th>
<th align="left">x67th.week</th>
<th align="left">x68th.week</th>
<th align="left">x69th.week</th>
<th align="left">x70th.week</th>
<th align="left">x71st.week</th>
<th align="left">x72nd.week</th>
<th align="left">x73rd.week</th>
<th align="left">x74th.week</th>
<th align="left">x75th.week</th>
<th align="left">x76th.week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Destiny’s Child</td>
<td align="left">Independent Women Part I</td>
<td align="left">2000-09-23</td>
<td align="left">2000-11-18</td>
<td align="right">78</td>
<td align="right">63</td>
<td align="right">49</td>
<td align="right">33</td>
<td align="right">23</td>
<td align="right">15</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">10</td>
<td align="right">12</td>
<td align="right">15</td>
<td align="right">22</td>
<td align="right">29</td>
<td align="right">31</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Santana</td>
<td align="left">Maria, Maria</td>
<td align="left">2000-02-12</td>
<td align="left">2000-04-08</td>
<td align="right">15</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">15</td>
<td align="right">19</td>
<td align="right">21</td>
<td align="right">26</td>
<td align="right">36</td>
<td align="right">48</td>
<td align="right">47</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Savage Garden</td>
<td align="left">I Knew I Loved You</td>
<td align="left">1999-10-23</td>
<td align="left">2000-01-29</td>
<td align="right">71</td>
<td align="right">48</td>
<td align="right">43</td>
<td align="right">31</td>
<td align="right">20</td>
<td align="right">13</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">14</td>
<td align="right">17</td>
<td align="right">21</td>
<td align="right">24</td>
<td align="right">30</td>
<td align="right">34</td>
<td align="right">37</td>
<td align="right">46</td>
<td align="right">47</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Madonna</td>
<td align="left">Music</td>
<td align="left">2000-08-12</td>
<td align="left">2000-09-16</td>
<td align="right">41</td>
<td align="right">23</td>
<td align="right">18</td>
<td align="right">14</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">11</td>
<td align="right">16</td>
<td align="right">20</td>
<td align="right">25</td>
<td align="right">27</td>
<td align="right">27</td>
<td align="right">29</td>
<td align="right">44</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Aguilera, Christina</td>
<td align="left">Come On Over Baby (All I Want Is You)</td>
<td align="left">2000-08-05</td>
<td align="left">2000-10-14</td>
<td align="right">57</td>
<td align="right">47</td>
<td align="right">45</td>
<td align="right">29</td>
<td align="right">23</td>
<td align="right">18</td>
<td align="right">11</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">22</td>
<td align="right">23</td>
<td align="right">43</td>
<td align="right">44</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Janet</td>
<td align="left">Doesn’t Really Matter</td>
<td align="left">2000-06-17</td>
<td align="left">2000-08-26</td>
<td align="right">59</td>
<td align="right">52</td>
<td align="right">43</td>
<td align="right">30</td>
<td align="right">29</td>
<td align="right">22</td>
<td align="right">15</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">8</td>
<td align="right">20</td>
<td align="right">25</td>
<td align="right">37</td>
<td align="right">40</td>
<td align="right">41</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Now that looks somewhat better.</p>
</div>
<div id="use-the-gather-function-tidying-up-the-weeks-column-in-the-dataset" class="section level4">
<h4>use the gather function tidying up the weeks column in the dataset</h4>
<pre class="r"><code># gather (data, key, value, ... ) where ... are the columns to collapse
bblong &lt;- gather(bb,week,rank,x1st.week:x76th.week,na.rm=TRUE)
knitr::kable(head(bblong))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">date.entered</th>
<th align="left">date.peaked</th>
<th align="left">week</th>
<th align="right">rank</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Destiny’s Child</td>
<td align="left">Independent Women Part I</td>
<td align="left">2000-09-23</td>
<td align="left">2000-11-18</td>
<td align="left">x1st.week</td>
<td align="right">78</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Santana</td>
<td align="left">Maria, Maria</td>
<td align="left">2000-02-12</td>
<td align="left">2000-04-08</td>
<td align="left">x1st.week</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Savage Garden</td>
<td align="left">I Knew I Loved You</td>
<td align="left">1999-10-23</td>
<td align="left">2000-01-29</td>
<td align="left">x1st.week</td>
<td align="right">71</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Madonna</td>
<td align="left">Music</td>
<td align="left">2000-08-12</td>
<td align="left">2000-09-16</td>
<td align="left">x1st.week</td>
<td align="right">41</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Aguilera, Christina</td>
<td align="left">Come On Over Baby (All I Want Is You)</td>
<td align="left">2000-08-05</td>
<td align="left">2000-10-14</td>
<td align="left">x1st.week</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Janet</td>
<td align="left">Doesn’t Really Matter</td>
<td align="left">2000-06-17</td>
<td align="left">2000-08-26</td>
<td align="left">x1st.week</td>
<td align="right">59</td>
</tr>
</tbody>
</table>
<p>Now that is looking much better.</p>
</div>
<div id="finally-i-will-be-doing-some-final-touch-ups-that-will-incorporate-the-use-of-fuctions-such-as-parse_number-mutate-as.date-and-arrange." class="section level4">
<h4>Finally I will be doing some final touch ups that will incorporate the use of fuctions such as <code>parse_number()</code>, <code>mutate()</code>, <code>as.date()</code>, and <code>arrange()</code>.</h4>
<ul>
<li>Extract week numbers from <code>week</code> variable using the <code>parse_number()</code> function.</li>
<li>Coerce <code>date.entered</code> to a <code>Date</code> object using the <code>as.date()</code> function.</li>
<li>Calculate the date of each ranking based on the date it entered the charts and the week.</li>
<li>Remove the date each ranking was entered since it is not relevant anymore.</li>
<li>Sort the resulting dataset on artist, track and week using the <code>arrange()</code> function.</li>
</ul>
<pre class="r"><code>bb &lt;- 
  bblong %&gt;% mutate(week = parse_number(week), #parse the week column
              date = as.Date(date.entered) + 7*(week-1)) %&gt;% #compute the date object
  select(-date.entered) %&gt;% # don&#39;t need date.entered anymore
  arrange(artist,track,week) #sort the resulting dataset
knitr::kable(head(bb))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">date.peaked</th>
<th align="right">week</th>
<th align="right">rank</th>
<th align="left">date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">1</td>
<td align="right">87</td>
<td align="left">2000-02-26</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">2</td>
<td align="right">82</td>
<td align="left">2000-03-04</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">3</td>
<td align="right">72</td>
<td align="left">2000-03-11</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">4</td>
<td align="right">77</td>
<td align="left">2000-03-18</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">5</td>
<td align="right">87</td>
<td align="left">2000-03-25</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep Ya Head Up II)</td>
<td align="left">2000-03-11</td>
<td align="right">6</td>
<td align="right">94</td>
<td align="left">2000-04-01</td>
</tr>
</tbody>
</table>
<p>Now that just looks perfect. We started with a super messy dataset, and now we have tidied it up to something that looks a lot cleaner and less cluttered while retaining all of the relevant informations.</p>
</div>
</div>
</div>
</div>
<div id="join-prompts-join-merge-look-up" class="section level1">
<h1>Join Prompts (join, merge, look up)</h1>
<ul>
<li>In this section I will be exploring the various ways to merge two set of data. I will be comparing functions provided by base R and others provided in the tidyverse library. Particularly, I will be exploring inner joins, and outer joins. I will be using a synthetic dataset. I will also be analyzing the match function provided in base R.</li>
</ul>
<div id="explore-the-base-r-function-merge-which-also-does-joins.-compare-and-contrast-with-dplyr-joins." class="section level2">
<h2>Explore the base R function merge(), which also does joins. Compare and contrast with dplyr joins.</h2>
<div id="load-in-and-get-a-feel-for-the-dataset" class="section level3">
<h3>Load in, and get a feel for the dataset</h3>
<pre class="r"><code>#define two dataframes I will be using for my analyses
#define the station dataframe
STATION &lt;- data.frame(ID=c(13,44,66),
    City = c(&quot;Phoenix&quot;,&quot;Denver&quot;,&quot;Caribou&quot;),
    State = c(&quot;AZ&quot;,&quot;CO&quot;,&quot;ME&quot;),
    Lat_N = c(33,40,47),
    Long_W = c(112,105,68))
#define the stats dataframe
STATS &lt;- data.frame(row = 1:6,
    ID = c(13,13,44,44,66,66),
    Month = c(1,7,1,7,1,7),
    Temp_F = c(57.4,91.7,27.3,74.8,6.7,65.8),
    Rain_I = c(0.31,5.15,0.18,2.11,2.1,4.52))

#create a singe dataframes for downstream illustrations
miami &lt;- data.frame(ID=77,City=&quot;Miami&quot;,State=&quot;FL&quot;,Lat_N=26,Long_W=80)
temp &lt;- data.frame(row=7, ID=89, Month=4, Temp_F=100, Rain_I=3.5)


#view the airlines dataframe
knitr::kable(head(STATION))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#view the flights dataframe
knitr::kable(head(STATS))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">row</th>
<th align="right">ID</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">13</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">13</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">44</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">44</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">66</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">66</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
</tbody>
</table>
<ul>
<li>Add miami to the station dataframe</li>
</ul>
<pre class="r"><code>STATION &lt;- rbind(STATION,miami)</code></pre>
<ul>
<li>Add temp to STATs dataframe</li>
</ul>
<pre class="r"><code>STATS &lt;- rbind(STATS,temp)</code></pre>
</div>
<div id="inner-joins" class="section level3">
<h3>Inner joins</h3>
<ul>
<li><p>An inner join is quite simple in that it matches pairs of observations whenever their keys are equal. Refer to figure below <img src="inner_join.png" /></p></li>
<li><p>I will be demonstrating inner joins using dplyr and base R</p></li>
</ul>
<pre class="r"><code>#join the tables using dplyr functions
my.data &lt;- inner_join(STATION, STATS, by = &quot;ID&quot;)

knitr::kable(my.data)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
</tbody>
</table>
<ul>
<li>Now do the same as above, but instead use base r functions</li>
</ul>
<pre class="r"><code>my.data.new &lt;- merge(STATION, STATS, by = &quot;ID&quot;)
knitr::kable(head(my.data.new))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
</tbody>
</table>
<ul>
<li>Comparing the tables returned from using dplyr vs base R, we see that they are the same. The <code>merge()</code> of base R is equilvalent to the <code>inner_join()</code> function of dplyr.</li>
<li>Also note that inner join is only done on fields that match in both datasets, so we do not see miami in the resulting table.</li>
</ul>
</div>
<div id="outer-joins" class="section level3">
<h3>Outer joins</h3>
<ul>
<li>Outer joins is comprised of a set of three types of joins. Particularly left_join, right_join and full_join.</li>
<li>Left join keeps all the observations in x</li>
<li>Right join keeps all the observations in y</li>
<li>Full join all the observations in both x and y</li>
<li>Refer to figure below</li>
</ul>
<div class="figure">
<img src="outer_joins.png" />

</div>
<ul>
<li>Use dplyr functions to perform an left join between the station table and the stats table on ID.</li>
</ul>
<pre class="r"><code>#use dplyr to perform left join
data.left &lt;- left_join(STATION, STATS, by = &quot;ID&quot;)
knitr::kable(data.left)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">77</td>
<td align="left">Miami</td>
<td align="left">FL</td>
<td align="right">26</td>
<td align="right">80</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<ul>
<li>Do the left join using base R <code>merge()</code> function</li>
</ul>
<pre class="r"><code>#perform a left merge using base R
data.left.new &lt;- merge(STATION,STATS,by=&quot;ID&quot;,all.x=TRUE)
knitr::kable(data.left.new)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">77</td>
<td align="left">Miami</td>
<td align="left">FL</td>
<td align="right">26</td>
<td align="right">80</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<ul>
<li>Again we see that both methods returns the same result.</li>
<li><p>The only difference between the two is that dpylr has an explicit left merge function where as with base R, it is an extra parameter passed in.</p></li>
<li><p>Use dplyr functions to perform an right join between the station table and the stats table on ID.</p></li>
</ul>
<pre class="r"><code>#use dplyr to peform a right join
data.right &lt;- right_join(STATION,STATS,by=&quot;ID&quot;)
knitr::kable(data.right)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">89</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">100.0</td>
<td align="right">3.50</td>
</tr>
</tbody>
</table>
<ul>
<li>Now do the same thing using the <code>merge()</code> in base R.</li>
</ul>
<pre class="r"><code>data.right.new &lt;- merge(STATION,STATS,by=&quot;ID&quot;,all.y=TRUE)
knitr::kable(data.right.new)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">89</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">100.0</td>
<td align="right">3.50</td>
</tr>
</tbody>
</table>
<ul>
<li>Again we see that both methods returns the same result.</li>
<li><p>The only difference between the two is that dpylr has an explicit left merge function where as with base R, it is an extra parameter passed in.</p></li>
<li><p>Use dplyr functions to perform an full join between the station table and the stats table on ID.</p></li>
</ul>
<pre class="r"><code>data.full &lt;- full_join(STATION,STATS,by=&quot;ID&quot;)
knitr::kable(data.full)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">77</td>
<td align="left">Miami</td>
<td align="left">FL</td>
<td align="right">26</td>
<td align="right">80</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">89</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">100.0</td>
<td align="right">3.50</td>
</tr>
</tbody>
</table>
<ul>
<li>Now do the same thing using the <code>merge()</code> in base R.</li>
</ul>
<pre class="r"><code>data.full.new &lt;- merge(STATION,STATS,by=&quot;ID&quot;, all = TRUE)
knitr::kable(data.full.new)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">City</th>
<th align="left">State</th>
<th align="right">Lat_N</th>
<th align="right">Long_W</th>
<th align="right">row</th>
<th align="right">Month</th>
<th align="right">Temp_F</th>
<th align="right">Rain_I</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">57.4</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Phoenix</td>
<td align="left">AZ</td>
<td align="right">33</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">91.7</td>
<td align="right">5.15</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">27.3</td>
<td align="right">0.18</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">Denver</td>
<td align="left">CO</td>
<td align="right">40</td>
<td align="right">105</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">74.8</td>
<td align="right">2.11</td>
</tr>
<tr class="odd">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.7</td>
<td align="right">2.10</td>
</tr>
<tr class="even">
<td align="right">66</td>
<td align="left">Caribou</td>
<td align="left">ME</td>
<td align="right">47</td>
<td align="right">68</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">65.8</td>
<td align="right">4.52</td>
</tr>
<tr class="odd">
<td align="right">77</td>
<td align="left">Miami</td>
<td align="left">FL</td>
<td align="right">26</td>
<td align="right">80</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">89</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">100.0</td>
<td align="right">3.50</td>
</tr>
</tbody>
</table>
<ul>
<li>In summary, both dplyr and base R provides functions that enables us to perform various sorts of joins on our datasets. The only difference is that, with dplyr we have eplicit functions for each type of joins and with base R, it is all packaged into a single <code>merge()</code> function. The packages may be different, but the functionalities remains the same. Also, using different types of joins enables us some flexibility with how we would like to restructure our dataset</li>
</ul>
</div>
</div>
<div id="explore-the-base-r-function-match-which-is-related-to-joins-and-merges-but-is-really-more-of-a-table-lookup.-compare-and-contrast-with-a-true-joinmerge." class="section level2">
<h2>Explore the base R function match(), which is related to joins and merges, but is really more of a “table lookup”. Compare and contrast with a true join/merge.</h2>
<ul>
<li>The match function in base R essentially checks for the first occurence of a dataframe in another dataframe. If the condition is satisfied, it returns the index of the value, or else it returns NA.</li>
<li>I will demonstrate with an example</li>
</ul>
<pre class="r"><code>#match the occurence of ID STATION vs STATS
result &lt;- match(STATION$ID, STATS$ID)

knitr::kable(result)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">NA</td>
</tr>
</tbody>
</table>
<ul>
<li>The above results show us that STATION and STATS ID match on fields 1, 3, and 5 Respectively. We also see that there is one non matching which is returned as <code>NA</code>.</li>
<li>Another thing to note is that the length of the result vector will be equal to the length of the query vector. In our case, the length of the result vector is equal to the length of the STATION dataframe.</li>
<li>Finally, to compare the match function with the merge/join function. I think the match function is a subroutine of the merge/join function. It finds all the row or indices where the join condition is true and the merge/join function then combines both datframes based on these indices.</li>
<li>Essentially, one could implement their own merge/join function by calling the match function on a field bewteen two dataframes and then concatinating the rows where the fields match.</li>
</ul>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
